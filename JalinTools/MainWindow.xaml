<Window x:Class="JalinTools.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        xmlns:viewmodels="clr-namespace:JalinTools.ViewModels"
        Title="JalinTools"
        Height="750"
        Width="1000"
        MinHeight="700"
        MinWidth="900"
        Background="#F5F5F5"
        TextElement.Foreground="{DynamicResource MaterialDesignBody}"
        TextElement.FontWeight="Regular"
        TextElement.FontSize="13"
        TextOptions.TextFormattingMode="Ideal"
        TextOptions.TextRenderingMode="Auto"
        FontFamily="{DynamicResource MaterialDesignFont}"
        WindowStartupLocation="CenterScreen">

    <Window.DataContext>
        <viewmodels:NavigationViewModel/>
    </Window.DataContext>

    <!-- WindowChrome for custom title bar (hardware accelerated!) -->
    <WindowChrome.WindowChrome>
        <WindowChrome CaptionHeight="50"
                      ResizeBorderThickness="5"
                      CornerRadius="0"
                      GlassFrameThickness="0"
                      UseAeroCaptionButtons="False"/>
    </WindowChrome.WindowChrome>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="50"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Custom Title Bar -->
        <Border Grid.Row="0" 
                Background="#DB4231">
            <Grid Margin="20,0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- Logo and Title -->
                <StackPanel Grid.Column="0" 
                            Orientation="Horizontal" 
                            VerticalAlignment="Center"
                            WindowChrome.IsHitTestVisibleInChrome="False">
                    <!-- App Icon -->
                    <Image Source="/Resources/icon.ico" 
                           Width="28" 
                           Height="28" 
                           Margin="0,0,12,0"
                           RenderOptions.BitmapScalingMode="HighQuality"/>
                    
                    <!-- JalinTools Text Logo -->
                    <TextBlock FontSize="20" 
                               FontWeight="Bold" 
                               Foreground="White"
                               VerticalAlignment="Center">
                        <Run Text="Jalin" FontWeight="ExtraBold"/><!--
                     --><Run Text="Tools" FontWeight="Light"/>
                    </TextBlock>
                </StackPanel>

                <!-- Window Controls -->
                <StackPanel Grid.Column="2" 
                            Orientation="Horizontal"
                            VerticalAlignment="Center"
                            WindowChrome.IsHitTestVisibleInChrome="True">
                    <!-- Minimize Button -->
                    <Button Click="MinimizeButton_Click"
                            Style="{StaticResource MaterialDesignFlatButton}"
                            Width="46"
                            Height="32"
                            Padding="0"
                            Foreground="White"
                            ToolTip="Minimize">
                        <materialDesign:PackIcon Kind="WindowMinimize" 
                                                 Width="18" 
                                                 Height="18"/>
                    </Button>

                    <!-- Maximize/Restore Button -->
                    <Button x:Name="MaximizeButton"
                            Click="MaximizeButton_Click"
                            Style="{StaticResource MaterialDesignFlatButton}"
                            Width="46"
                            Height="32"
                            Padding="0"
                            Foreground="White"
                            ToolTip="Maximize">
                        <materialDesign:PackIcon x:Name="MaximizeIcon"
                                                 Kind="WindowMaximize" 
                                                 Width="18" 
                                                 Height="18"/>
                    </Button>

                    <!-- Close Button -->
                    <Button Click="CloseButton_Click"
                            Width="46"
                            Height="32"
                            Padding="0"
                            Foreground="White"
                            ToolTip="Close">
                        <Button.Style>
                            <Style TargetType="Button" BasedOn="{StaticResource MaterialDesignFlatButton}">
                                <Style.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter Property="Background" Value="#C62828"/>
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </Button.Style>
                        <materialDesign:PackIcon Kind="Close" 
                                                 Width="18" 
                                                 Height="18"/>
                    </Button>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Main Content -->
        <Grid Grid.Row="1" Background="#F5F5F5">
            <!-- Main Navigation Frame -->
            <Frame Content="{Binding CurrentPage}" 
                   NavigationUIVisibility="Hidden"/>
        </Grid>
    </Grid>
</Window>
